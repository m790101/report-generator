@if(data().length > 0) {
<main #pdfTable>

  <div class="px-2 mb-9">
    <div class="flex justify-between">
      <p class="font-bold text-2xl">檢查報告</p>
      <div (click)="generatePdf(pdfTable)" class="flex align-middle gap-2 cursor-pointer">
        <span class="font-bold text-xl">下載</span>
        <app-icon-download></app-icon-download>
      </div>
    </div>
    <p class="text-xl">{{ data()[0].name }}</p>
  </div>
  <table id="pdfTable">
    <thead class="text-xs">
      <tr>
        <th class="">檢驗項目</th>
        <th *ngFor="let item of data()">{{ getFormatDate(item.date) }}</th>
        <th class="text-end">參考值說明</th>
        <th class="text-end">單位</th>
      </tr>
    </thead>
    <tbody class="text-xs">
      <ng-container *ngFor="let key of getKeys()">
        <tr *ngIf="hasValue(key)">
          <td>{{ titleMapping[key] ?? "" }}</td>
          <ng-container *ngFor="let item of data()">
            <td
              [style.color]="checkResult(item[key]?.resultNote)"
              class="text-center"
            >
              {{ item[key]?.value }}
            </td>
          </ng-container>
          <td class="text-end">{{ criteria[key] }}</td>
          <td class="text-end">{{ units[key] }}</td>
        </tr>
      </ng-container>
    </tbody>
  </table>
</main>
}
